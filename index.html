<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GA4</title>
    
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-THKC7VG");
    </script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-THKC7VG"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <h1>Hello GA4 Home</h1>
    <a id="contact" data-button="contact_link" class="nav-button-contact" href="contact.html">Contact</a>
    <a id="about" data-button="about_link" class="nav-button-about" href="about.html">About</a>





    <button id="btn-ga4-trace" data-click="index-ga4-button" class="fire">
      GA4 Button Trace Test
    </button>

    <button id="btn-ga4-trace-none" data-click="index-ga4-button">
      None Setting Event
    </button>

    <button id="btn-ga4-trace-fire" data-click="index-ga4-button" class="fire">
      Fire
    </button>

    <script>
      $(function(){
        $('[class^="nav-button-"]').on('click' , function(e){
            console.log(e.target);
            let $that = $(e.target);
            dataLayer.push({
              event: "linkTo",
              NavTarget: $that.data('button'),
            });

        });
      });
      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("btn-ga4-trace").onclick = function () {
          dataLayer.push({ event: "fire_to_google", clickElement: "button" });
        };

        document.getElementById("btn-ga4-trace-none").onclick = function () {
          dataLayer.push({
            event: "do_not_fire_to_ga4",
            clickElement: "button",
          });
        };

        let myButtons = document.querySelectorAll(".fire");
        for (let index = 0; index < myButtons.length; index++) {
          myButtons[index].addEventListener("click", function () {
            dataLayer.push({
              event: "fire_to_fire",
              clickElement: "button",
            });
          });
        }
      });
    </script>
  </body>
</html>
